<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSS TreeView Example</title>
<link rel="stylesheet" href="/static/tree.css">

</head>
<body>
<h2>TreeView CSS</h2>
<div class="tree" id="treeview">
  <!-- Se llena con JS -->
</div>

<script>
async function fetchTree() {
  const resp = await fetch('/data');
  const data = await resp.json();
  return data[0]; // ECharts-style array
}

function createNode(node) {
  const li = document.createElement('li');
  
  if (node.children && node.children.length > 0) {
    // input checkbox para expand/collapse
    const input = document.createElement('input');
    input.type = 'checkbox';
    input.id = 'node-' + Math.random().toString(36).substr(2, 9);

    const label = document.createElement('label');
    label.setAttribute('for', input.id);
    label.textContent = node.title || node.name;

    li.appendChild(input);
    li.appendChild(label);

    const ul = document.createElement('ul');
    node.children.forEach(child => {
      ul.appendChild(createNode(child));
    });
    li.appendChild(ul);
  } else {
    li.textContent = node.title || node.name;
  }

  return li;
}

async function renderTree() {
  const data = await fetchTree();
  const ul = document.createElement('ul');
  ul.appendChild(createNode(data));
  document.getElementById('treeview').appendChild(ul);
}

renderTree();
</script>


<ul class="tree">
  <li>
    <details open>
      <summary>Giant planets</summary>
      <ul>
        <li>
          <details>
            <summary>Gas giants</summary>
            <ul>
              <li>Jupiter</li>
              <li>Saturn</li>
            </ul>
          </details>
        </li>
        <li>
          <details>
            <summary>Ice giants</summary>
            <ul>
              <li>Uranus</li>
              <li>Neptune</li>
            </ul>
          </details>
        </li>
      </ul>
    </details>
  </li>
</ul>

</body>
</html>
